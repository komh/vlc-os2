From 9885c522332b7fc46b896d1f208bf85557f1286c Mon Sep 17 00:00:00 2001
From: KO Myung-Hun <komh@chollian.net>
Date: Thu, 22 Mar 2018 21:08:16 +0900
Subject: [PATCH 008/120] Revert "qt: Don't enforce a default screen to the
 fullscreen controller"

This reverts commit 169a441790e9006652487d5424b0e3678612a6fd.
---
 modules/gui/qt/main_interface.cpp | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

diff --git a/modules/gui/qt/main_interface.cpp b/modules/gui/qt/main_interface.cpp
index 67bc987acc..41a30e8da7 100644
--- a/modules/gui/qt/main_interface.cpp
+++ b/modules/gui/qt/main_interface.cpp
@@ -888,11 +888,18 @@ void MainInterface::setVideoFullScreen( bool fs )
     if( fs )
     {
         int numscreen = var_InheritInteger( p_intf, "qt-fullscreen-screennumber" );
+        /* if user hasn't defined screennumber, or screennumber that is bigger
+         * than current number of screens, take screennumber where current interface
+         * is
+         */
+        if( numscreen < 0 || numscreen >= QApplication::desktop()->screenCount() )
+            numscreen = QApplication::desktop()->screenNumber( p_intf->p_sys->p_mi );
+
+        if( fullscreenControls )
+            fullscreenControls->setTargetScreen( numscreen );
 
-        if ( numscreen >= 0 && numscreen < QGuiApplication::screens().length() )
+        if ( numscreen >= 0 )
         {
-            if( fullscreenControls )
-                fullscreenControls->setTargetScreen( numscreen );
 
             QRect screenres = QGuiApplication::screens()[ numscreen ]->geometry();
             lastWinScreen = windowHandle()->screen();
-- 
2.50.1

