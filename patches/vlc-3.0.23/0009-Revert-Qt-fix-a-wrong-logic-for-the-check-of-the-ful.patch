From dcc211252001375a272a08d925df149ab58443a9 Mon Sep 17 00:00:00 2001
From: KO Myung-Hun <komh@chollian.net>
Date: Tue, 2 Jan 2018 18:00:54 +0900
Subject: [PATCH 009/120] Revert "Qt: fix a wrong logic for the check of the
 fullscreen screen number"

This reverts commit cd6598579be9e5e0cf4c6d38ff31fdffb2cf5e79.
---
 modules/gui/qt/components/controller.cpp | 17 +----------------
 modules/gui/qt/main_interface.cpp        |  2 +-
 2 files changed, 2 insertions(+), 17 deletions(-)

diff --git a/modules/gui/qt/components/controller.cpp b/modules/gui/qt/components/controller.cpp
index 2e327e5ab9..d46773777e 100644
--- a/modules/gui/qt/components/controller.cpp
+++ b/modules/gui/qt/components/controller.cpp
@@ -1029,23 +1029,8 @@ void FullscreenControllerWidget::setTargetScreen(int screennumber)
 
 int FullscreenControllerWidget::targetScreen()
 {
-    if( i_screennumber < 0 || i_screennumber >= QGuiApplication::screens().length() )
-    {
-#if QT_VERSION >= QT_VERSION_CHECK(5, 10, 0)
-        auto *screen = QGuiApplication::screenAt( p_intf->p_sys->p_mi->pos() );
-        if (screen != nullptr)
-        {
-            for (qsizetype i = 0; i < QGuiApplication::screens().length(); i++)
-            {
-                if (screen == QGuiApplication::screens()[i])
-                    return i;
-            }
-        }
-        return -1;
-#else
+    if( i_screennumber < 0 || i_screennumber > QApplication::desktop()->screenCount() )
         return QApplication::desktop()->screenNumber( p_intf->p_sys->p_mi );
-#endif
-    }
     return i_screennumber;
 }
 
diff --git a/modules/gui/qt/main_interface.cpp b/modules/gui/qt/main_interface.cpp
index 41a30e8da7..587e23b99b 100644
--- a/modules/gui/qt/main_interface.cpp
+++ b/modules/gui/qt/main_interface.cpp
@@ -892,7 +892,7 @@ void MainInterface::setVideoFullScreen( bool fs )
          * than current number of screens, take screennumber where current interface
          * is
          */
-        if( numscreen < 0 || numscreen >= QApplication::desktop()->screenCount() )
+        if( numscreen == -1 || numscreen > QApplication::desktop()->screenCount() )
             numscreen = QApplication::desktop()->screenNumber( p_intf->p_sys->p_mi );
 
         if( fullscreenControls )
-- 
2.50.1

